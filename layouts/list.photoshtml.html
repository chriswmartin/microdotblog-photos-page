{{ define "main" }}
  {{- $should_show_all_photos = $.Site.Params.show_all_photos -}}


  <link rel="stylesheet" href="/css/photos-grid.css" />

  <div class="photos-grid photos-grid--style-grid">
    {{- $list := where .Site.Pages ".Params.photos" "!=" nil -}}
    {{- $len := (len
      $list)
    -}}
    {{ range $index, $value := $list }}
      {{- $post_url := .Permalink -}}
      {{- $photos := cond $should_show_all_photos .Params.photos_with_metadata (first 1 .Params.photos_with_metadata) -}}
      {{ range $photos }}
        <a href="{{ $post_url }}" class="photos-grid__item">
          <img
            src="{{ .url }}"
            width="{{ .width }}"
            height="{{ .height }}"
            alt="{{ .alt }}"
            loading="lazy"
          />
        </a>
      {{ end }}
    {{ end }}
  </div>
{{ end }}
